import { useState } from "react";
import { flushSync } from "react-dom";

export default function App() {
    const [count, setCount] = useState(0);
    const [text, setText] = useState("");

    const handleClick = () => {
        flushSync(() => setCount((c) => c + 1));
        // –≠—Ç–æ—Ç setState –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
        setText("–û–±–Ω–æ–≤–ª–µ–Ω–æ");
    };

    console.log("–†–µ–Ω–¥–µ—Ä"); // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–≤–∞ —Ä–µ–Ω–¥–µ—Ä–∞

    return <button onClick={handleClick}>–ù–∞–∂–º–∏</button>;
}


//flushSync –≤ React
// flushSync ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ –∏–∑ react-dom, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç
// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è batch-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
//
// üìå –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
//
// –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –¥–æ –¥—Ä—É–≥–æ–≥–æ.
// –ö–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI.